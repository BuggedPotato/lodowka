(()=>{"use strict";var t=function(){function t(){}return t.showEditForm=function(e){var n=document.getElementById("wysiwyg");n.style.display="flex",n.dataset.editingNote=e.toString(),t.addButtonsToStatus()},t.hideEditForm=function(e){e.preventDefault(),document.getElementById("wysiwyg").style.display="none",t.removeButtonsFromStatus()},t.addButtonsToStatus=function(){var e=document.getElementsByClassName("tox-statusbar__text-container")[0],n=document.createElement("button");n.classList.add("btnTinyMCE"),n.id="TinyMCECancel",e.appendChild(n);var o=document.createElement("button");o.classList.add("btnTinyMCE"),o.id="TinyMCESave",o.type="submit",e.appendChild(o),n.addEventListener("click",t.hideEditForm)},t.removeButtonsFromStatus=function(){var t=document.getElementsByClassName("tox-statusbar__text-container")[0],e=document.getElementById("TinyMCECancel"),n=document.getElementById("TinyMCESave");t.removeChild(e),t.removeChild(n)},t}(),e=function(){function e(t,e,n,o,i){void 0===n&&(n={x:160,y:160}),void 0===o&&(o={x:100,y:100}),void 0===i&&(i="Hello there!"),this.id=t,this.parentFunctions=e,this.size=n,this.position=o,this.text=i,this.zIndex=100}return e.prototype.getNoteHTML=function(){var t=document.createElement("div");t.classList.add("note"),t.id=this.id.toString(),t.style.width=this.size.x.toString()+"px",t.style.height=this.size.y.toString()+"px",t.style.top=this.position.y.toString()+"px",t.style.left=this.position.x.toString()+"px";var e=document.createElement("div");e.classList.add("textbox"),e.innerHTML=this.text,t.appendChild(e);var n=document.createElement("img");n.classList.add("icon"),n.classList.add("delNote"),n.src="./gfx/crossIcon.png",t.appendChild(n);var o=document.createElement("img");o.classList.add("icon"),o.classList.add("resizeNote"),o.src="./gfx/resizeIcon.jpeg",t.appendChild(o);var i=document.createElement("img");return i.classList.add("icon"),i.classList.add("editNote"),i.src="./gfx/editIcon.png",t.appendChild(i),this.setEvents(t,n,o,i),t},e.prototype.setEvents=function(e,n,o,i){var s=this;e.addEventListener("mousedown",(function(t){s.zIndex=s.parentFunctions.getTopIndex(),console.log("zIndex: "+s.zIndex),e.style.zIndex=s.zIndex.toString(),s.doTheDragThingy(t,e)})),n.addEventListener("click",(function(t){n.parentNode.parentNode.removeChild(e),s.parentFunctions.deleteNote(s.id)})),o.addEventListener("mousedown",(function(t){s.resizeMe(t,o,e)})),i.addEventListener("click",(function(e){setEditorContent(s),t.showEditForm(s.id)}))},e.prototype.doTheDragThingy=function(t,e){e.style.backgroundColor="#ffebcc";var n=t.clientX,o=t.clientY,i=e.offsetLeft,s=e.offsetTop,d=n-i,r=o-s;function c(t){var n=t.clientX-d,o=t.clientY-r;e.style.left=n.toString()+"px",e.style.top=o.toString()+"px",this.position={x:n,y:o},t.stopPropagation()}document.addEventListener("mousemove",c,!0),document.addEventListener("mouseup",(function t(n){document.removeEventListener("mousemove",c,!0),document.removeEventListener("mouseup",t,!0),e.style.backgroundColor="papayawhip",n.stopPropagation()}),!0),t.stopPropagation(),t.preventDefault()},e.prototype.resizeMe=function(t,e,n){var o=t.clientX,i=t.clientY,s=e.offsetLeft,d=e.offsetTop,r=o-s,c=i-d;function a(t){var e=t.clientX-r+20,o=t.clientY-c+20;e=e<=100?parseInt(n.style.width.replace("px","")):e,o=o<=100?parseInt(n.style.height.replace("px","")):o,n.style.width=e.toString()+"px",n.style.height=o.toString()+"px",this.size={x:e,y:o},t.stopPropagation()}document.addEventListener("mousemove",a,!0),document.addEventListener("mouseup",(function t(e){document.removeEventListener("mousemove",a,!0),document.removeEventListener("mouseup",t,!0),e.stopPropagation()}),!0),t.stopPropagation(),t.preventDefault()},e.prototype.getSize=function(){return this.size},e}(),n=new(function(){function t(t,e,n){var o=this;void 0===e&&(e=0),void 0===n&&(n=0),this.stickyNotes=[],this.topIndex=0,this.functions4Notes={getTopIndex:function(){return o.topIndex++,o.topIndex},deleteNote:function(t){o.stickyNotes=o.stickyNotes.filter((function(e){return e.id!=t||(o.currentNotes--,o.updateFridge(),!1)}))}},this.name=t,this.totalNotes=e,this.currentNotes=n}return t.prototype.addStickyNote=function(){var t=new e(this.topIndex+1,this.functions4Notes);this.stickyNotes.push(t),this.currentNotes=this.stickyNotes.length,this.topIndex++,this.totalNotes++,this.updateFridge()},t.prototype.renderNotes=function(t){this.stickyNotes.map((function(e){document.getElementById(e.id.toString())||document.getElementById(t).appendChild(e.getNoteHTML())}))},t.prototype.getNoteOfId=function(t){return this.stickyNotes.find((function(e){return e.id==t}))},t.prototype.updateFridge=function(){document.getElementById("totalNotes").innerText="Przebieg: "+this.totalNotes.toString(),document.getElementById("currentNotes").innerText="Karteczki: "+this.currentNotes.toString()},t}())("This a fridge");document.getElementById("newNote").addEventListener("click",(function(){n.addStickyNote(),n.renderNotes("fridge")})),document.body.onload=function(){setListener(n)}})();